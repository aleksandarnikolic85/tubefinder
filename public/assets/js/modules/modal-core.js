/*! ledvance-2019 1.3.1-95 17-11-2020 17:11:20 */
"use strict";function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}define(["sequencer","eventHelper"],function(a,b){"use strict";var c="out",d=".modal-pane .modal-content",e=function(){function e(a){a.eventTarget=a.dataset.modalClick,a.removeEventListener("click",this,!1),a.addEventListener("click",this,!1)}function f(){this.node=document.querySelector(this.dataConfig.templSelector)}function g(a){for(;a.hasChildNodes();)a.removeChild(a.childNodes[0])}function h(a){null!==a.modalContent&&(document.querySelector(a.dataConfig.content).innerHTML=a.modalContent,a.modalContent=null);var b=a.node.querySelector(d);g(b)}function i(b){this.Sequencer=new a(b)}function j(a,c){this.dataConfig=null==a.tagName?a:{},this.element=void 0===a.tagName?null:a,this.dataConfig.templSelector=c,this.modalContent=null,this.events=new b,this.overlay=new k("#overlay",".modal-inner"),this.assignAnimation(),this.registerEvents()}function k(a,c){this.node=document.querySelector(a),this.inner=this.node.querySelector(c),this.events=new b,this.display=new i({name:"overlay",selector:a})}return i.prototype={constructor:i,show:function(){var a=this;this.display.Sequencer.addEventListener({animationName:a.animationName.in,onAnimationStart:function(){a.events.dispatcher.addEvent("show",a)}}),this.display.Sequencer.addEventListener({animationName:a.animationName.in,onAnimationEnd:function(){a.events.dispatcher.addEvent("shown",a)}}),this.node.classList.add("in")},hide:function(){var a=this;this.display.Sequencer.addEventListener({animationName:a.animationName.out,onAnimationStart:function(){a.events.dispatcher.addEvent("hide",a)}}),this.display.Sequencer.addEventListener({animationName:a.animationName.out,onAnimationEnd:function(){a.node.classList.remove(c),a.node.classList.remove("in"),a.events.dispatcher.addEvent("hidden",a)}}),this.node.classList.add(c)}},j.prototype={constructor:j,addBackdropEvent:function(){var a=this.node,b=this;a.removeEventListener("click",this,!1),a.addEventListener("click",function(a){a.target.classList.contains("modal-backdrop")&&b.hide()},!1)},addClickEvents:function(){var a=this,b=a.node.querySelectorAll("[data-modal-click]");b.forEach(function(b){e.call(a,b)})},assignAnimation:function(){this.animationName={in:"modalIn",out:"modalOut"},this.overlay.animationName={in:"overlayIn",out:"overlayOut"}},cloneContent:function(a){return this.modalContent=document.querySelector(a.content).innerHTML,document.querySelector(a.content).innerHTML="",this.modalContent},contentShow:function(){var a=this.node.querySelector(d);a.classList.remove("modal-content--opaque")},contentHide:function(){var a=this.node.querySelector(d);a.classList.add("modal-content--opaque")},contentPut:function(a){var b=this,c=b.node.querySelector(d);g(c),c.appendChild(a),b.events.dispatcher.addEvent("content.ready",b)},getConfig:function(a){var b=this,c={};if(null==a.dataset.modalClick)for(;null==a.dataset.modalClick;)a=a.parentNode;return new Promise(function(b){for(var d in a.dataset){var e=/^(modal)(.*)/;if(e.exec(d)){var f=e.exec(d)[2].length?d.replace(/^modal/,""):"templSelector";c[f.charAt(0).toLowerCase()+f.slice(1)]=a.dataset[d]}}b(c)})},hide:function(){this.display.hide.call(this)},handleEvent:function(a){var b=a.target.eventTarget;if(null==b)for(var c=a.target;null==b&&"body"!==c.tagName.toLowerCase();)c=c.parentNode,b=c.eventTarget;(!1!==this.isInsideModal(a.target)||"launch"==b)&&(a.preventDefault(),"function"==typeof b?b.call(this,a):"function"==typeof this[b]&&this[b].call(this,a))},init:function(){var a=this;null===this.element?(a.display=new i({name:"modal",selector:a.dataConfig.templSelector}),f.call(a)):this.getConfig(this.element).then(function(b){_extends(a.dataConfig,b),a.display=new i({name:"modal",selector:a.dataConfig.templSelector}),f.call(a),e.call(a,a.element)})},inlineSpinnerShow:function(){this.flagSet("preventHide","true");var a=this.node.querySelector(SELECTOR_INLINE_SPINNER);a.classList.remove("hidden")},inlineSpinnerHide:function(){this.flagRemove("preventHide");var a=this.node.querySelector(SELECTOR_INLINE_SPINNER);a.classList.add("hidden")},isInsideModal:function(a){return this.node.contains(a)},launch:function(){var a=this.node.querySelector(d),b=this.dataConfig,c=this.overlay,e=this;c.display.show.call(c),a.innerHTML=this.cloneContent(b),e.display.show.call(e),e.events.dispatcher.addEvent("content.ready",e),e.addBackdropEvent(),e.addClickEvents()},registerEvents:function(){var a=this;this.events.on("content.ready",function(){var b=a.node.querySelectorAll("[data-modal-click]");b.forEach(function(b){e.call(a,b)})}),this.events.on("hidden",function(){a.overlay.display.hide.call(a.overlay)}),this.overlay.events.on("hidden",function(){h(a)})}},k.prototype={constructor:k},{Modal:j}}();return e.Modal});