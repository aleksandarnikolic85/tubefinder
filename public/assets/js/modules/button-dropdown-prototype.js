/*! ledvance-2019 1.3.1-95 17-11-2020 17:11:20 */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}define(["eventHelper"],function(a){"use strict";var b=function b(){_classCallCheck(this,b),this.node=null,this.dropdownOptions=null,this.dropdownSelect=null,this.events=new a,this.state="-is-inactive",this.textIndicator=null,this.selectors={dropdownOptions:".dropdown-options",dropdownIndicator:".dropdown-indicator",select:"select",textIndicator:".text-indicator"}};return b.prototype={constructor:b,buildDropdownOptions:function(){var a=this;return new Promise(function(b){var c=document.createElement("ul");if(null!==a.dropdownSelect){var d=a.dropdownSelect.querySelectorAll("option");d.forEach(function(b,d){c.appendChild(a.createOption(b,d))}),b(c)}})},createOption:function(b){var c=document.createElement("li"),d=document.createElement("a"),a=document.createTextNode(b.innerHTML),e=document.createAttribute("href");if(b.classList.length){var f=document.createAttribute("class");if(f.value=b.classList,f.value.includes("icon")){var g="<i class=\"a-icon "+f.value+"\"><svg preserveAspectRatio=\"xMaxYMin\"><use xlink:href=\"../svg/sprite.svg#"+f.value+"\"></use></svg></i>";d.innerHTML=g,d.setAttribute("target","_blank")}else c.setAttributeNode(f)}return e.value=b.value,d.setAttributeNode(e),d.appendChild(a),d.dataset.value=b.value,c.appendChild(d),c},dropdownOff:function(a){if(this.node.classList.remove("-is-active"),this.state="-is-inactive",void 0!==a){var b=this;setTimeout(function(){b.dropdownOff()},0)}},eventsAddInitialEvents:function(){this.indicator.customEventType="dropdown-show",this.indicator.addEventListener("click",this,!1)},eventsAddOffEvent:function(){window.document.addEventListener("click",this,{capture:!0,once:!0},!1)},eventsAddSelectEvents:function(){var a=this;this.dropdownOptions.querySelectorAll("li a").forEach(function(b){b.customEventType="option-select",b.addEventListener("click",a,!1)})},eventsResetEvents:function(){var a=this;window.document.removeEventListener("click",this,{capture:!0,once:!0},!1),setTimeout(function(){a.eventsAddInitialEvents()},0)},handleEvent:function(a){switch(a.type){case"mouseout":"a"===a.relatedTarget.tagName.toLowerCase()||a.relatedTarget.classList.contains("dropdown-options")||(this.dropdownOff(),this.eventsResetEvents());break;case"mouseover":this.node.removeEventListener("mouseover",this),this.dropdownOptions.addEventListener("mouseout",this),a.currentTarget.classList.toggle("-is-active");break;case"click":"dropdown-show"==a.currentTarget.customEventType&&(this.indicator.removeEventListener("click",this),this.dropdownOptions.addEventListener("mouseout",this),this.node.classList.toggle("-is-active"),this.state="-is-active",this.eventsAddSelectEvents(),this.eventsAddOffEvent(),this.events.dispatcher.addEvent("ready")),"option-select"==a.currentTarget.customEventType?this.onOptionSelect(a):!a.currentTarget.customEventType&&(this.dropdownOff(!0),this.eventsResetEvents());}},init:function(a){var b=this;this.node=a,this.indicator=this.node.querySelector(this.selectors.dropdownIndicator),this.textIndicator=this.node.querySelector(this.selectors.textIndicator),this.dropdownOptions=this.node.querySelector(this.selectors.dropdownOptions),this.dropdownSelect=this.node.querySelector(this.selectors.select),this.eventsAddInitialEvents(),this.buildDropdownOptions(this.node).then(function(a){b.dropdownOptions.appendChild(a),b.selectActiveDefault(),b.eventsAddInitialEvents(),b.events.dispatcher.addEvent("ready")})},onOptionSelect:function(a){a.preventDefault(),this.eventsResetEvents(),this.events.dispatcher.addEvent("option-selected",a.currentTarget.dataset.value),this.node.classList.remove("-is-active"),this.dropdownOptions.removeEventListener("mouseout",this),this.textIndicator.innerHTML=a.currentTarget.innerHTML},removeOptions:function(){for(;this.dropdownOptions.childNodes.length;)this.dropdownOptions.removeChild(this.dropdownOptions.firstChild)},selectActiveDefault:function(){var a=this;this.dropdownOptions.querySelectorAll("li").forEach(function(b){b.classList.remove("_hide"),b.querySelector("a").classList.contains("-is-active")&&(a.textIndicator.innerHTML=b.querySelector("a").innerHTML,b.classList.add("_hide"))})}},b});