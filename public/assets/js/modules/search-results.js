/*! ledvance-2019 1.3.1-95 17-11-2020 17:11:20 */
"use strict";define(["xhr"],function(a){"use strict";var b=1e3,c=function(a){return"\n\t<li>\n\t\t<article class=\"m-sr-teaser -global-result row\">\n\t\t\t<div class=\"teaser-main col-12 col-md-8 col-lg-9\">\n\t\t\t\t<header class=\"teaser-header\">\n\t\t\t\t\t\t<h4 class=\"headline _color-orange -size-small -bold\">\n\t\t\t\t\t\t\t".concat(a.title,"\n\t\t\t\t\t\t</h4>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"teaser-body\">\n\t\t\t\t\t").concat(a.content.substring(0,200),"\n\t\t\t\t</div>\n\t\t\t\t<div class=\"teaser-footer\">\n\t\t\t\t\t<a class=\"a-link -with-icon\" href=\"#\">\n\t\t\t\t\t\t<i class=\"a-icon icon-arrow -color-orange \">\n\t\t\t\t\t\t\t<svg preserveAspectRatio=\"xMaxYMin\">\n\t\t\t\t\t\t\t\t<use xlink:href=\"/assets/svg/sprite.svg#icon-arrow\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</i>\n\t\t\t\t\t\t<span>Read more</span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!--div class=\"m-area -figure col-12 col-md-4 col-lg-3\">\n\t\t\t\t<figure class=\"-contains-image teaser-media\">\n\t\t\t\t\t<div class=\"a-image _aspect-ratio-box -aspr-16-9\" data-require=\"aspect-ratio-image\">\n\n\t\t\t\t\t\t<img src=\"https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg\" alt=\"Default alt\" title=\"Default title\" srcset=\"https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg 340w, https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg 400w, https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg 840w, https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg 1024w, https://dammedia.ledvance.info/media/resource/800x223xcrop/asset-2416979/dummy.jpeg 1920w\" sizes=\"(max-width: 575px) 320px,(max-width: 767px) 640px,(max-width: 991px) 840px,(max-width: 1199px) 1000px,1200px\">\n\t\t\t\t\t</div>\n\t\t\t\t</figure>\n\t\t\t</div-->\n\t\t</article>\n\t</li>\n\t")},d={getCache:function(a){return{chunks:[],chunksLength:0,queryUrl:a}},getChunks:function(a){return Promise.all(a.chunks).then(function(a){var b=a.map(function(a){return JSON.parse(a).response.docs}).reduce(function(c,a){return c.concat(a)}),c=JSON.parse(a[0]).response.numFound;return{results:b,total:c}})},fetchChunk:function(b,c,d){var e="".concat(d.queryUrl,"&rows=").concat(c,"&start=").concat(b),f=a.get(e);d.chunks.push(f),d.chunksLength+=c},fetchAllCunks:function(c){var d="".concat(c.queryUrl,"&rows=").concat(b,"&start=0");c.chunks=[a.get(d)],c.chunksLength=b},getResults:function(a,b,c,e){var f=a+b;f>e.chunksLength&&d.fetchChunk(e.chunksLength,f-e.chunksLength,e);var g=d.getChunks(e);return f+10>e.chunksLength&&d.fetchChunk(a+b,10,e),g.then(function(d){var e=d.results.filter(c);return{results:e.slice(a,a+b),total:d.total,filter:e.length}})}};return{init:function(a){var b=a.dataset.urlSearch,e=a.querySelector(".js-results-container"),f=a.querySelector(".js-loadmore"),g=a.querySelector(".search-filter .header"),h=a.querySelector(".search-filter"),i=function(){return new URLSearchParams(window.location.search)},j=function(){var a=i().get("results");return a?+a:10},k=function(a){var b=i();b.set("results",a),window.history.replaceState({},"","?"+b.toString())},l=function(){return i().get("q")};if(l()){var m=function(a){var b=a.map(function(a){return c({title:a.title,content:a.content})}).join("");e.insertAdjacentHTML("beforeend",b)},n=function(a,b){a&&(b>j()?a.classList.remove("_hide"):a.classList.add("_hide"))},o=function(b){var c=0<i().getAll("category").length,d=e.querySelectorAll("li").length;return a.querySelectorAll(".js-search-total").forEach(function(a){return a.innerHTML=c?b.filter:b.total}),a.querySelectorAll(".js-search-shown").forEach(function(a){return a.innerHTML=d}),a.querySelectorAll(".js-search-query").forEach(function(a){return a.innerHTML=l()}),b},p=function(a){return 0===a.results.length?(e.innerHTML="<li>Sorry, no result were returned for the given query</li>",a):(m(a.results),n(f,a.total),a)},q=function(a){var b=i().getAll("category");return 0===b.length||a.category&&b.includes(a.category)},r=function(a){var b=j();f.classList.add("-is-loading"),d.getResults(b,10,q,a).then(p).then(function(a){return k(b+10),a}).then(o).finally(function(){return f.classList.remove("-is-loading")})},s=function(b){if(!h.classList.contains("loaded")){h.querySelector("button[type=reset]").addEventListener("click",function(){var a=i();a.delete("category"),window.history.replaceState({},"","?"+a),w()}),d.fetchAllCunks(b);var c=a.querySelectorAll(".search-filter .dropdown-panel input"),e=function(){for(var a=[],b=0;b<c.length;b++)c[b].checked&&a.push(c[b].name);return a};d.getChunks(b).then(function(a){h.classList.add("loaded"),c.forEach(function(b){var c=a.results.filter(function(a){return a.category===b.name}).length,d=h.querySelector("label[for=\"".concat(b.id,"\"]"));d.dataset.amount=c,b.checked=i().getAll("category").includes(b.name),b.addEventListener("change",function(){k(10);var a=i();a.delete("category"),window.history.replaceState({},"","?"+a),e().forEach(function(b){a.append("category",b),window.history.replaceState({},"","?"+a)}),w()})})})}},t="".concat(b,"?query=").concat(l()),u=j(),v=d.getCache(t);f.addEventListener("click",function(){return r(v)}),g.addEventListener("click",function(){return s(v)});var w=function(){e.innerHTML="",d.getResults(0,u,q,v).then(p).then(o)};w()}}}});