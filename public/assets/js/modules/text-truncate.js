/*! ledvance-2019 1.3.1-95 17-11-2020 17:11:20 */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}define(["responsiveHelper"],function(a){"use strict";var b=function a(b){_classCallCheck(this,a),this.el=b,this.originalText=b.innerHTML,this.settings=b.dataset.settings,this.arrStages=[],this.init()};return b.prototype={constructor:b,init:function(){var b=this;this.parseSettings(this.settings).then(function(c){for(var d in c)b.arrStages.push(d);a.registerHandler(),a.events.on("mq_change",function(){-1===b.arrStages.indexOf(this)?b.el.innerHTML=b.originalText:b.trunctate(this)}),a.getStage().then(function(a){-1===b.arrStages.indexOf(a)?b.el.innerHTML=b.originalText:b.trunctate(a)})})},parseSettings:function(a){return new Promise(function(b){b(JSON.parse(a))})},trunctate:function(a){var b=this;this.parseSettings(this.settings).then(function(c){var d=c[a],e=b.originalText,f=/\s+[\w\'".?!-]+$/;if(e.length>d){e=e.substring(0,d-3);var g=f.exec(e);e=null===g?e=e.substring(0,e.length-1):e.substring(0,g.index),b.el.innerHTML=e+"..."}else b.el.innerHTML=b.originalText})}},{init:function(a){new b(a)}}});